<html>
<head>
	<title>Game Table</title>
	<script src="3rd/paperjs/paper.js" type="text/javascript"></script>
	<script src="js/util.js" type="text/javascript"></script>
	<script src="js/card.js" type="text/javascript"></script>
	<script src="js/user.js" type="text/javascript"></script>
	<script src="js/gameview.js" type="text/javascript"></script>
	<script type="text/paperscript" canvas="paper">
	
		var gameview = new GameView(view);
		var players = gameview.init();
        var hitObject = null;
        function onMouseDown(event) {
			//Test if any of the objects have been hit, and store the object
			var curHitObject = paper.project.hitTest(event.point, 
				{segments:true, stroke:true, fill: true, tolerance: 5});
			console.log(hitObject);
			if(curHitObject && (curHitObject instanceof HitResult)) {
				hitObject = curHitObject.item;
				console.log(hitObject);
				if(hitObject instanceof Raster) {
					console.log('hit raster');
					if(hitObject.image && hitObject.id != 'rear') {
						hitObject.position.y = hitObject.position.y - offset;
						players[0].cards[hitObject.id].selected = true;
					}
				} else {
					//hitObject.fillColor = '#EEEEEE';
					hitObject.strokeColor = 'white';
					hitObject.strokeWidth = 4;
					//console.log(hitObject);
				}
			}
        }
        function onMouseUp(event) {
			if(event.delta.length == 0)
			{
				var curHitObject = paper.project.hitTest(event.point, 
					{segments:true, stroke:true, fill: true, tolerance: 5});
				console.log(hitObject);
			}
            if(hitObject) {
				if(hitObject instanceof Raster) {
				} else {
					//hitObject.fillColor = 'gray';
					hitObject.strokeColor = 'yellow';
					hitObject.strokeWidth = 1;
				}
            }
            hitObject = null;
            //console.log("hit null");
        }
	</script>
	<style type="text/css">
				body { 
					margin: 0;
					overflow: hidden;
					background-color: #000;
					font-family:Helvetica,Arial;
				} 
	</style>
</head>
<body>
	<canvas id="paper" resize></canvas>
	<div id="resContainer"></div>
</body>
</html>